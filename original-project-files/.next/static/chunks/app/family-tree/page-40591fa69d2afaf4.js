(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4931],{9541:function(e,t,n){Promise.resolve().then(n.bind(n,6198))},9554:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var a=n(3407),o=n(9291);let r=(0,a.Ue)()((0,o.tJ)(e=>({imgString:"",saveImgString:t=>e({imgString:t})}),{name:"family-tree-image"}))},6198:function(e,t,n){"use strict";n.d(t,{default:function(){return x}});var a=n(7437),o=n(6785),r=n(197),i=n(3775);n(715);var l=n(7293),s=n(2265),c=n(7776);function d(e,t){return{onAdd:(0,s.useCallback)(()=>{t(t=>t.concat(e))},[e,t])}}var u=n(7266),f=n(6920),p=n(5079),g=n(9554);let m=[{id:"0",type:"customNode",data:{name:"",surname:"",dateOfBirth:"",placeOfBirth:"",gender:"Male",genderColor:{Male:"#9ad3f6",Female:"#f6bfba"}},position:{x:0,y:0},style:{borderRadius:"4px"}}],h={customNode:function(e){let{id:t,data:n,isConnectable:r}=e,{getNode:i,setNodes:l,setEdges:c,toObject:d}=(0,o._K)(),{name:g,surname:m,dateOfBirth:h,placeOfBirth:y,gender:x,genderColor:b}=n,C=(0,u.y1)(e=>{let n=e.target.name,a=e.target.value;l(e=>e.map(e=>(e.id===t&&(e.data={...e.data,[n]:a}),e)));let o=d();localStorage.setItem("family-tree",JSON.stringify(o))},300),N=(0,s.useCallback)(()=>{l(e=>e.map(e=>(e.id===t&&(e.data={...e.data,gender:"Male"===e.data.gender?"Female":"Male"}),e)));let e=d();localStorage.setItem("family-tree",JSON.stringify(e))},[l,t,d]),H=(0,s.useCallback)((e,t)=>{let{source:n,sourceHandle:a,target:r,targetHandle:i}=e,{x:s,y:d}=t;if(!n||!r)return;let u=crypto.randomUUID(),f={id:u,type:"customJunction",data:{},position:{x:s,y:d}},p={id:crypto.randomUUID(),source:n,target:u,type:"straight",sourceHandle:a},g={id:crypto.randomUUID(),source:u,target:r,type:"straight",targetHandle:i};l(e=>e.concat(f)),c(e=>(0,o.Z_)(p,(0,o.Z_)(g,e)))},[l,c]),j=(0,s.useCallback)(function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,{position:{x:o,y:r},width:i}=e,{position:{x:l,y:s}}=t;if(i)return{x:o+i/2+Math.abs(o+i-l)/2,y:"leftHandler"===n?s+a:r+a}},[]);return(0,a.jsxs)("div",{style:{backgroundColor:b[x]},className:"rounded-lg p-5",children:[(0,a.jsx)(o.HH,{type:"target",id:"top",position:o.Ly.Top,isConnectable:r}),(0,a.jsx)(o.HH,{type:"target",id:"left",position:o.Ly.Left,isConnectable:!0,onConnect:e=>{let{source:t,target:n}=e;if(!t||!n)return;let a=i(t),r=i(n);if(a&&r){if("right"===e.sourceHandle&&"customJunction"!==a.type){let t=j(a,r,"leftHandler",50);if(!t)return;H(e,t)}else if("right"===e.sourceHandle){let t={...e,type:"straight",sourceHandle:"right"};c(e=>(0,o.Z_)(t,e))}}}}),(0,a.jsx)("div",{className:"mb-3 flex items-center justify-center",children:(0,a.jsx)(f.G,{icon:"Male"===x?p.Aci:p.hTh,className:"fa-lg cursor-pointer ".concat("Male"===x?"text-[#3daaee] hover:text-[#336889]":"text-[#f26356] hover:text-[#aa483f]"),onClick:N})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,a.jsx)("input",{className:"min-w-6 text-ellipsis rounded bg-transparent font-semibold placeholder:text-[#eaf7ff] focus:outline-none",name:"name",placeholder:"Name",defaultValue:g,onChange:C}),(0,a.jsx)("input",{className:"min-w-6 text-ellipsis rounded bg-transparent font-semibold placeholder:text-[#eaf7ff] focus:outline-none",name:"surname",placeholder:"Surname",defaultValue:m,onChange:C}),(0,a.jsx)("input",{className:"min-w-6 bg-transparent text-xs placeholder:text-[#eaf7ff] focus:outline-none",name:"dateOfBirth",placeholder:"Date of Birth",defaultValue:h,onChange:C}),(0,a.jsx)("input",{className:"min-w-6 bg-transparent text-xs placeholder:text-[#eaf7ff] focus:outline-none",name:"placeOfBirth",placeholder:"Place of Birth",defaultValue:y,onChange:C})]}),(0,a.jsx)(o.HH,{type:"source",id:"right",position:o.Ly.Right,isConnectable:!0,onConnect:e=>{let{source:t,target:n}=e;if(!t||!n)return;let a=i(t),r=i(n);if(a&&r){if("left"===e.targetHandle&&"customJunction"!==r.type){let t=j(a,r,"rightHandler",50);if(!t)return;H(e,t)}else if("left"===e.targetHandle){let t={...e,type:"straight",targetHandle:"left"};c(e=>(0,o.Z_)(t,e))}}}})]})},customJunction:function(e){let{isConnectable:t}=e,{setEdges:n}=(0,o._K)();return(0,a.jsxs)("div",{className:"rounded-lg border-foreground bg-foreground p-4",children:[(0,a.jsx)(o.HH,{type:"target",id:"left",position:o.Ly.Left,isConnectable:t,onConnect:e=>{if("right"===e.sourceHandle){let t={...e,type:"straight",targetHandle:"right"};n(e=>(0,o.Z_)(t,e))}}}),(0,a.jsx)(o.HH,{type:"source",id:"right",position:o.Ly.Right,isConnectable:t,onConnect:e=>{if("left"===e.targetHandle){let t={...e,type:"straight",targetHandle:"left"};n(e=>(0,o.Z_)(t,e))}}}),(0,a.jsx)(o.HH,{type:"source",id:"bottom",position:o.Ly.Bottom,isConnectable:t})]})}};function y(){let e=(0,s.useRef)(null),[t,n,u]=(0,o.Rr)(m),[f,p,y]=(0,o.ll)([]),{getNode:x,getNodes:b}=(0,o._K)(),{onConnect:C}=function(e,t){let n=(0,s.useRef)(null),{screenToFlowPosition:a}=(0,o._K)();return{onConnect:(0,s.useCallback)(t=>{n.current=null,e(e=>(0,o.Z_)(t,e))},[e]),onConnectStart:(0,s.useCallback)((e,t)=>{let{nodeId:a}=t;n.current=a},[]),onConnectEnd:(0,s.useCallback)(o=>{if(n.current&&o.target&&o instanceof MouseEvent&&o.target instanceof HTMLDivElement&&o.target.classList.contains("react-flow__pane")){let r=crypto.randomUUID(),i={id:r,type:"customNode",position:a({x:o.clientX,y:o.clientY}),data:{name:"",surname:"",dateOfBirth:"",placeOfBirth:"",gender:"Male",genderColor:{Male:"#9ad3f6",Female:"#f6bfba"}},style:{borderRadius:"4px"}};t(e=>e.concat(i)),e(e=>n.current?e.concat({id:r,source:n.current,target:r}):e)}},[t,e,a])}}(p,n),{onSave:N,onRestore:H}=function(e,t){let{setViewport:n,toObject:a}=(0,o._K)();return{onSave:(0,s.useCallback)(()=>{let e=a();localStorage.setItem("family-tree",JSON.stringify(e)),c.A.success("Your flow has been saved.")},[a]),onRestore:(0,s.useCallback)(()=>{(async()=>{let a=localStorage.getItem("family-tree"),o=a?JSON.parse(a):null;if(o){let{x:a=0,y:r=0,zoom:i=1}=o.viewport;e(o.nodes||[]),t(o.edges||[]),n({x:a,y:r,zoom:i})}})()},[e,t,n])}}(n,p),{onAdd:j}=d({id:crypto.randomUUID(),type:"customNode",position:{x:Math.random()*window.innerWidth-100,y:Math.random()*window.innerHeight},data:{name:"",surname:"",dateOfBirth:"",placeOfBirth:"",gender:"Male",genderColor:{Male:"#9ad3f6",Female:"#f6bfba"}},style:{borderRadius:"4px"}},n),{onAdd:v}=d({id:crypto.randomUUID(),type:"customJunction",data:{},position:{x:Math.random()*window.innerWidth-100,y:Math.random()*window.innerHeight}},n),w=(0,s.useCallback)(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e.position.y-a,r={...t,position:{...t.position,y:o}};n(e=>e.map(e=>e.id===r.id?r:e))},[n]),_=(0,s.useCallback)((e,t)=>{if("customJunction"!==t.type)return;let[n,a]=(0,o.my)([t],f).filter(e=>"straight"===e.type).map(e=>e.source===t.id?e.target:e.source),r=x(n),i=x(a);r&&w(t,r,50),i&&w(t,i,50)},[f,x,w]);(0,s.useEffect)(()=>{H()},[H]);let k=(0,g.W)(e=>e.saveImgString);return(0,a.jsx)("div",{className:"h-full grow",ref:e,style:{height:"100%"},children:(0,a.jsxs)(o.x$,{nodes:t,edges:f,onNodesChange:u,onEdgesChange:y,onConnect:C,onNodeDrag:_,nodeTypes:h,fitView:!0,fitViewOptions:{padding:2},defaultEdgeOptions:{type:"smoothstep"},nodeOrigin:[.5,0],children:[(0,a.jsxs)(o.s_,{className:"divide-x rounded border bg-background py-1 shadow-xl",position:"top-right",children:[(0,a.jsx)("button",{className:"px-3",onClick:()=>{N(),function(){let e=(0,o.RX)(b()),t=(0,o.$i)(e,1024,768,.1,2),n=document.querySelector(".react-flow__viewport");n&&(0,l.KT)(n,{filter:function(e){return"i"!==e.tagName},style:{transform:"translate(".concat(t.x,"px, ").concat(t.y,"px scale(").concat(t.zoom,"))")}}).then(e=>{k(e)})}()},children:"save"}),(0,a.jsx)("button",{className:"px-3",onClick:j,children:"add node"}),(0,a.jsx)("button",{className:"px-3",onClick:v,children:"add junction"})]}),(0,a.jsx)(r.A,{}),(0,a.jsx)(i.Z,{})]})})}function x(){return(0,a.jsx)(o.tV,{children:(0,a.jsx)(y,{})})}}},function(e){e.O(0,[1489,3676,780,9751,1748,2314,2971,7023,1744],function(){return e(e.s=9541)}),_N_E=e.O()}]);