(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1241],{4316:function(e,t,n){Promise.resolve().then(n.bind(n,2957))},8046:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(3407),o=n(9291);let r=(0,a.Ue)()((0,o.tJ)(e=>({imgString:"",saveImgString:t=>e({imgString:t})}),{name:"org-chart-image"}))},2957:function(e,t,n){"use strict";n.d(t,{default:function(){return x}});var a=n(7437),o=n(6785),r=n(197),l=n(3775);n(715);var s=n(7293),i=n(2265),c=n(7776),d=n(7266),u=n(6920),f=n(5079),g=n(8046);let p=[{id:"0",type:"customNode",data:{name:"",surname:"",dateOfBirth:"",placeOfBirth:"",gender:"Male",genderColor:{Male:"#9ad3f6",Female:"#f6bfba"}},position:{x:0,y:0},style:{borderRadius:"4px"}}],m={customNode:function(e){let{id:t,data:n,isConnectable:r}=e,{setNodes:l,toObject:s}=(0,o._K)(),{name:c,surname:g,dateOfBirth:p,placeOfBirth:m,gender:h,genderColor:x}=n,b=(0,d.y1)(e=>{let n=e.target.name,a=e.target.value;l(e=>e.map(e=>(e.id===t&&(e.data={...e.data,[n]:a}),e)));let o=s();localStorage.setItem("org-chart",JSON.stringify(o))},300),y=(0,i.useCallback)(()=>{l(e=>e.map(e=>(e.id===t&&(e.data={...e.data,gender:"Male"===e.data.gender?"Female":"Male"}),e)));let e=s();localStorage.setItem("org-chart",JSON.stringify(e))},[l,t,s]);return(0,a.jsxs)("div",{style:{backgroundColor:x[h]},className:"rounded-lg p-5",children:[(0,a.jsx)(o.HH,{type:"target",id:"top",position:o.Ly.Top,isConnectable:r}),(0,a.jsx)(o.HH,{type:"target",id:"left",position:o.Ly.Left,isConnectable:r}),(0,a.jsx)("div",{className:"mb-3 flex items-center justify-center",children:(0,a.jsx)(u.G,{icon:"Male"===h?f.Aci:f.hTh,className:"fa-lg cursor-pointer ".concat("Male"===h?"text-[#3daaee] hover:text-[#336889]":"text-[#f26356] hover:text-[#aa483f]"),onClick:y})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,a.jsx)("input",{className:"min-w-6 text-ellipsis rounded bg-transparent font-semibold placeholder:text-[#eaf7ff] focus:outline-none",name:"name",placeholder:"Name",defaultValue:c,onChange:b}),(0,a.jsx)("input",{className:"min-w-6 text-ellipsis rounded bg-transparent font-semibold placeholder:text-[#eaf7ff] focus:outline-none",name:"surname",placeholder:"Surname",defaultValue:g,onChange:b}),(0,a.jsx)("input",{className:"min-w-6 bg-transparent text-xs placeholder:text-[#eaf7ff] focus:outline-none",name:"dateOfBirth",placeholder:"Date of Birth",defaultValue:p,onChange:b}),(0,a.jsx)("input",{className:"min-w-6 bg-transparent text-xs placeholder:text-[#eaf7ff] focus:outline-none",name:"placeOfBirth",placeholder:"Place of Birth",defaultValue:m,onChange:b})]}),(0,a.jsx)(o.HH,{type:"source",id:"right",position:o.Ly.Right,isConnectable:r}),(0,a.jsx)(o.HH,{type:"source",id:"bottom",position:o.Ly.Bottom,isConnectable:r})]})}};function h(){var e;let t=(0,i.useRef)(null),[n,d,u]=(0,o.Rr)(p),[f,h,x]=(0,o.ll)([]),{getNode:b,getNodes:y}=(0,o._K)(),{onConnect:C}=function(e,t){let n=(0,i.useRef)(null),{screenToFlowPosition:a}=(0,o._K)();return{onConnect:(0,i.useCallback)(t=>{n.current=null,e(e=>(0,o.Z_)(t,e))},[e]),onConnectStart:(0,i.useCallback)((e,t)=>{let{nodeId:a}=t;n.current=a},[]),onConnectEnd:(0,i.useCallback)(o=>{if(n.current&&o.target&&o instanceof MouseEvent&&o.target instanceof HTMLDivElement&&o.target.classList.contains("react-flow__pane")){let r=crypto.randomUUID(),l={id:r,type:"customNode",position:a({x:o.clientX,y:o.clientY}),data:{name:"",surname:"",dateOfBirth:"",placeOfBirth:"",gender:"Male",genderColor:{Male:"#9ad3f6",Female:"#f6bfba"}},style:{borderRadius:"4px"}};t(e=>e.concat(l)),e(e=>n.current?e.concat({id:r,source:n.current,target:r}):e)}},[t,e,a])}}(h,d),{onSave:N,onRestore:v}=function(e,t){let{setViewport:n,toObject:a}=(0,o._K)();return{onSave:(0,i.useCallback)(()=>{let e=a();localStorage.setItem("org-chart",JSON.stringify(e)),c.A.success("Your flow has been saved.")},[a]),onRestore:(0,i.useCallback)(()=>{(async()=>{let a=localStorage.getItem("org-chart"),o=a?JSON.parse(a):null;if(o){let{x:a=0,y:r=0,zoom:l=1}=o.viewport;e(o.nodes||[]),t(o.edges||[]),n({x:a,y:r,zoom:l})}})()},[e,t,n])}}(d,h),{onAdd:j}=(e={id:crypto.randomUUID(),type:"customNode",position:{x:Math.random()*window.innerWidth-100,y:Math.random()*window.innerHeight},data:{name:"",surname:"",dateOfBirth:"",placeOfBirth:"",gender:"Male",genderColor:{Male:"#9ad3f6",Female:"#f6bfba"}},style:{borderRadius:"4px"}},{onAdd:(0,i.useCallback)(()=>{d(t=>t.concat(e))},[e,d])}),w=(0,i.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=e.position.y-n,o={...t,position:{...t.position,y:a}};d(e=>e.map(e=>e.id===o.id?o:e))},[d]),k=(0,i.useCallback)((e,t)=>{if("customJunction"!==t.type)return;let[n,a]=(0,o.my)([t],f).filter(e=>"straight"===e.type).map(e=>e.source===t.id?e.target:e.source),r=b(n),l=b(a);r&&w(t,r,50),l&&w(t,l,50)},[f,b,w]);(0,i.useEffect)(()=>{v()},[v]);let O=(0,g.Z)(e=>e.saveImgString);return(0,a.jsx)("div",{className:"h-full grow",ref:t,style:{height:"100%"},children:(0,a.jsxs)(o.x$,{nodes:n,edges:f,onNodesChange:u,onEdgesChange:x,onConnect:C,onNodeDrag:k,nodeTypes:m,fitView:!0,fitViewOptions:{padding:2},defaultEdgeOptions:{type:"straight"},nodeOrigin:[.5,0],children:[(0,a.jsxs)(o.s_,{className:"divide-x rounded border bg-background py-1 shadow-xl",position:"top-right",children:[(0,a.jsx)("button",{className:"px-3",onClick:()=>{N(),function(){let e=(0,o.RX)(y()),t=(0,o.$i)(e,1024,768,.1,2),n=document.querySelector(".react-flow__viewport");n&&(0,s.KT)(n,{filter:function(e){return"i"!==e.tagName},style:{transform:"translate(".concat(t.x,"px, ").concat(t.y,"px scale(").concat(t.zoom,"))")}}).then(e=>{O(e)})}()},children:"save"}),(0,a.jsx)("button",{className:"px-3",onClick:j,children:"add node"})]}),(0,a.jsx)(r.A,{}),(0,a.jsx)(l.Z,{})]})})}function x(){return(0,a.jsx)(o.tV,{children:(0,a.jsx)(h,{})})}}},function(e){e.O(0,[1489,3676,780,9751,1748,2314,2971,7023,1744],function(){return e(e.s=4316)}),_N_E=e.O()}]);