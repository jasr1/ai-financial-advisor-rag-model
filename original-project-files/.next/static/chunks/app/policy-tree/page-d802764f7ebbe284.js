(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2394],{3437:function(e,r,t){Promise.resolve().then(t.bind(t,5044)),Promise.resolve().then(t.bind(t,9557)),Promise.resolve().then(t.bind(t,698))},7027:function(e,r,t){"use strict";t.d(r,{S:function(){return a},u:function(){return s}}),t(4590);var n=t(8064),a=(0,n.$)("8baf98dd26306a7ab0cceb2ba5ec0fa182821d6b"),s=(0,n.$)("37f1b18b368bb2750394c99d6a2f0448818ca6c4")},5044:function(e,r,t){"use strict";t.d(r,{policyTreeColumns:function(){return i},policyTreeColumnsWithDelete:function(){return o}});var n=t(7437),a=t(519),s=t(7027);let i=[{accessorKey:"carrier",header:"Carrier"},{accessorKey:"type",header:"Type"},{accessorKey:"amount",header:"Amount",cell:e=>{let{row:r}=e,t=r.original.amount,a=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(+t);return(0,n.jsx)("div",{className:"text-left font-medium",children:a})}},{accessorKey:"owner",header:"Owner"},{accessorKey:"beneficiary",header:"Beneficiary"},{accessorKey:"payor",header:"Payor"},{accessorKey:"anniversary",header:"Anniversary",cell:e=>{let{row:r}=e,t=new Date(r.original.anniversary).toLocaleDateString();return(0,n.jsx)("div",{className:"text-left font-medium",children:t})}},{accessorKey:"insured",header:"Insured"}],o=[...i,{id:"actions",header:"Actions",cell:e=>{let{row:r}=e;return(0,n.jsx)("div",{children:(0,n.jsx)(a.Z,{handleDeleteRow:async()=>{await (0,s.S)(r.original.id)}})})}}]},9557:function(e,r,t){"use strict";t.d(r,{default:function(){return m}});var n=t(7437),a=t(2265),s=t(9343),i=t(9772),o=t(1014),l=t(7027),d=t(3363),c=t(7209),u=t(6046);let f=i.z.object({carrier:i.z.string(),type:i.z.string(),amount:i.z.string(),owner:i.z.string(),beneficiary:i.z.string(),payor:i.z.string(),anniversary:i.z.string(),insured:i.z.string()});function m(){let[e,r]=(0,a.useState)(!1),t=(0,s.cI)({resolver:(0,o.F)(f),defaultValues:{carrier:"",type:"",amount:"",owner:"",beneficiary:"",payor:"",anniversary:"",insured:""}});async function i(e){r(!0),await (0,l.u)(e),t.reset(),r(!1)}return(0,n.jsx)(d.l0,{...t,children:(0,n.jsxs)("form",{onSubmit:t.handleSubmit(i),className:"space-y-5",children:[(0,n.jsx)("p",{className:""}),(0,n.jsx)(d.Wi,{control:t.control,name:"carrier",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{placeholder:"Carrier",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(d.Wi,{control:t.control,name:"type",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{placeholder:"Type",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(d.Wi,{control:t.control,name:"amount",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{type:"number",placeholder:"Amount",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(d.Wi,{control:t.control,name:"owner",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{placeholder:"Owner",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(d.Wi,{control:t.control,name:"beneficiary",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{placeholder:"Beneficiary",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(d.Wi,{control:t.control,name:"payor",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{placeholder:"Payor",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(d.Wi,{control:t.control,name:"anniversary",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{type:"date",placeholder:"Anniversary",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(d.Wi,{control:t.control,name:"insured",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{placeholder:"Insured",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(u.Z,{disabled:e,defaultText:"Add Policy",loadingText:"Adding..."})]})})}},698:function(e,r,t){"use strict";t.d(r,{DataTable:function(){return l}});var n=t(7437),a=t(3514),s=t(4175),i=t(7304),o=t(2265);function l(e){var r;let{columns:t,data:l}=e,[d,c]=(0,o.useState)([]),[u,f]=(0,o.useState)([]),[m,x]=(0,o.useState)({}),h=(0,a.b7)({data:l,columns:t,state:{sorting:d,columnFilters:u,columnVisibility:m},onColumnFiltersChange:f,getFilteredRowModel:(0,s.vL)(),getCoreRowModel:(0,s.sC)(),onSortingChange:c,getSortedRowModel:(0,s.tj)(),getPaginationRowModel:(0,s.G_)(),onColumnVisibilityChange:x});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(i.iA,{children:[(0,n.jsx)(i.xD,{children:h.getHeaderGroups().map(e=>(0,n.jsx)(i.SC,{children:e.headers.map(e=>(0,n.jsx)(i.ss,{children:e.isPlaceholder?null:(0,a.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,n.jsx)(i.RM,{children:(null===(r=h.getRowModel().rows)||void 0===r?void 0:r.length)?h.getRowModel().rows.map(e=>(0,n.jsx)(i.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,n.jsx)(i.pj,{children:(0,a.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,n.jsx)(i.SC,{children:(0,n.jsx)(i.pj,{colSpan:t.length,className:"py-6 text-center",children:"No results."})})})]})})})}},519:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(7437),a=t(9733),s=t(9943);function i(e){let{handleDeleteRow:r}=e;return(0,n.jsxs)(s.aR,{children:[(0,n.jsx)(s.vW,{asChild:!0,children:(0,n.jsx)(a.z,{variant:"destructive",children:"Delete"})}),(0,n.jsxs)(s._T,{children:[(0,n.jsxs)(s.fY,{children:[(0,n.jsx)(s.f$,{children:"Are you absolutely sure?"}),(0,n.jsx)(s.yT,{children:"This action cannot be undone. This will permanently delete this and remove it from our servers."})]}),(0,n.jsxs)(s.xo,{children:[(0,n.jsx)(s.le,{children:"Cancel"}),(0,n.jsx)(s.OL,{className:"bg-destructive hover:bg-destructive/80",onClick:r,children:"Continue"})]})]})]})}},6046:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(7437),a=t(9733),s=t(3274);function i(e){let{loadingText:r="Submitting...",defaultText:t="Submit",...i}=e;return(0,n.jsx)(a.z,{...i,size:"lg",className:"w-full",type:"submit",disabled:i.disabled,children:i.disabled?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{className:"mr-2 h-6 w-6 animate-spin"}),(0,n.jsx)("span",{children:r})]}):(0,n.jsx)("span",{children:t})})}},9943:function(e,r,t){"use strict";t.d(r,{OL:function(){return j},_T:function(){return f},aR:function(){return l},f$:function(){return h},fY:function(){return m},le:function(){return y},vW:function(){return d},xo:function(){return x},yT:function(){return p}});var n=t(7437),a=t(2265),s=t(6669),i=t(9354),o=t(9733);let l=s.fC,d=s.xz,c=s.h_,u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(s.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:r})});u.displayName=s.aV.displayName;let f=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsxs)(c,{children:[(0,n.jsx)(u,{}),(0,n.jsx)(s.VY,{ref:r,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a})]})});f.displayName=s.VY.displayName;let m=e=>{let{className:r,...t}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",r),...t})};m.displayName="AlertDialogHeader";let x=e=>{let{className:r,...t}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t})};x.displayName="AlertDialogFooter";let h=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(s.Dx,{ref:r,className:(0,i.cn)("text-lg font-semibold",t),...a})});h.displayName=s.Dx.displayName;let p=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(s.dk,{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});p.displayName=s.dk.displayName;let j=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(s.aU,{ref:r,className:(0,i.cn)((0,o.d)(),t),...a})});j.displayName=s.aU.displayName;let y=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(s.$j,{ref:r,className:(0,i.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",t),...a})});y.displayName=s.$j.displayName},9733:function(e,r,t){"use strict";t.d(r,{d:function(){return l},z:function(){return d}});var n=t(7437),a=t(2265),s=t(1538),i=t(2218),o=t(9354);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",chatbot:"bg-green-500 text-white hover:bg-green-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:t})),ref:r,...c})});d.displayName="Button"},3363:function(e,r,t){"use strict";t.d(r,{NI:function(){return p},Wi:function(){return u},l0:function(){return d},lX:function(){return h},xJ:function(){return x},zG:function(){return j}});var n=t(7437),a=t(2265),s=t(1538),i=t(9343),o=t(9354),l=t(402);let d=i.RV,c=a.createContext({}),u=e=>{let{...r}=e;return(0,n.jsx)(c.Provider,{value:{name:r.name},children:(0,n.jsx)(i.Qr,{...r})})},f=()=>{let e=a.useContext(c),r=a.useContext(m),{getFieldState:t,formState:n}=(0,i.Gc)(),s=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...s}},m=a.createContext({}),x=a.forwardRef((e,r)=>{let{className:t,...s}=e,i=a.useId();return(0,n.jsx)(m.Provider,{value:{id:i},children:(0,n.jsx)("div",{ref:r,className:(0,o.cn)("space-y-2",t),...s})})});x.displayName="FormItem";let h=a.forwardRef((e,r)=>{let{className:t,...a}=e,{error:s,formItemId:i}=f();return(0,n.jsx)(l._,{ref:r,className:(0,o.cn)(s&&"text-destructive",t),htmlFor:i,...a})});h.displayName="FormLabel";let p=a.forwardRef((e,r)=>{let{...t}=e,{error:a,formItemId:i,formDescriptionId:o,formMessageId:l}=f();return(0,n.jsx)(s.g7,{ref:r,id:i,"aria-describedby":a?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!a,...t})});p.displayName="FormControl",a.forwardRef((e,r)=>{let{className:t,...a}=e,{formDescriptionId:s}=f();return(0,n.jsx)("p",{ref:r,id:s,className:(0,o.cn)("text-sm text-muted-foreground",t),...a})}).displayName="FormDescription";let j=a.forwardRef((e,r)=>{let{className:t,children:a,...s}=e,{error:i,formMessageId:l}=f(),d=i?String(null==i?void 0:i.message):a;return d?(0,n.jsx)("p",{ref:r,id:l,className:(0,o.cn)("text-sm font-medium text-destructive",t),...s,children:d}):null});j.displayName="FormMessage"},7209:function(e,r,t){"use strict";t.d(r,{I:function(){return i}});var n=t(7437),a=t(2265),s=t(9354);let i=a.forwardRef((e,r)=>{let{className:t,type:a,...i}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...i})});i.displayName="Input"},402:function(e,r,t){"use strict";t.d(r,{_:function(){return d}});var n=t(7437),a=t(2265),s=t(8364),i=t(2218),o=t(9354);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(s.f,{ref:r,className:(0,o.cn)(l(),t),...a})});d.displayName=s.f.displayName},7304:function(e,r,t){"use strict";t.d(r,{RM:function(){return l},SC:function(){return d},iA:function(){return i},pj:function(){return u},ss:function(){return c},xD:function(){return o}});var n=t(7437),a=t(2265),s=t(9354);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",t),...a})})});i.displayName="Table";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b",t),...a})});o.displayName="TableHeader";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",t),...a})});l.displayName="TableBody",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a})}).displayName="TableFooter";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("tr",{ref:r,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})});d.displayName="TableRow";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("th",{ref:r,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a})});c.displayName="TableHead";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("td",{ref:r,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a})});u.displayName="TableCell",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",t),...a})}).displayName="TableCaption"},2157:function(e,r,t){"use strict";t.d(r,{e:function(){return s}});var n=t(959),a=t(357);function s(){return(0,n.AY)(a.env.NEXT_PUBLIC_SUPABASE_URL,a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},9354:function(e,r,t){"use strict";t.d(r,{Y:function(){return l},cn:function(){return i},e:function(){return o}});var n=t(4839),a=t(6164),s=t(2157);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,n.W)(r))}let o=Intl.NumberFormat("en-CA",{currency:"CAD",currencyDisplay:"symbol",currencySign:"standard",style:"currency",minimumFractionDigits:2,maximumFractionDigits:2});async function l(){let e=(0,s.e)(),{data:{user:r}}=await e.auth.getUser();if(r){let{data:t,error:n}=await e.from("profiles").select("role").eq("user_id",r.id).single();return n?(console.error("Error fetching user profile:",n.message),{role:null}):{role:t.role}}return{role:null}}}},function(e){e.O(0,[8034,7158,5577,1542,2971,7023,1744],function(){return e(e.s=3437)}),_N_E=e.O()}]);